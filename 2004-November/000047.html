<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [ircbp-commits] IRCBP -  r52 - framework/trunk
   </TITLE>
   <LINK REL="Index" HREF="http://lists.berlios.de/pipermail/ircbp-commits/2004-November/index.html" >
   <LINK REL="made" HREF="mailto:ircbp-commits%40lists.berlios.de?Subject=Re%3A%20%5Bircbp-commits%5D%20IRCBP%20-%20%20r52%20-%20framework/trunk&In-Reply-To=%3C200411160100.iAG10fif001039%40sheep.berlios.de%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="000046.html">
   <LINK REL="Next"  HREF="000048.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[ircbp-commits] IRCBP -  r52 - framework/trunk</H1>
    <B>nigelj at berlios.de</B> 
    <A HREF="mailto:ircbp-commits%40lists.berlios.de?Subject=Re%3A%20%5Bircbp-commits%5D%20IRCBP%20-%20%20r52%20-%20framework/trunk&In-Reply-To=%3C200411160100.iAG10fif001039%40sheep.berlios.de%3E"
       TITLE="[ircbp-commits] IRCBP -  r52 - framework/trunk">nigelj at berlios.de
       </A><BR>
    <I>Tue Nov 16 02:00:41 CET 2004</I>
    <P><UL>
        <LI>Previous message: <A HREF="000046.html">[ircbp-commits] IRCBP -  r51 - framework/trunk
</A></li>
        <LI>Next message: <A HREF="000048.html">[ircbp-commits] IRCBP -  r53 - in website/trunk: . _notes images/ic includes
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#47">[ date ]</a>
              <a href="thread.html#47">[ thread ]</a>
              <a href="subject.html#47">[ subject ]</a>
              <a href="author.html#47">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Author: nigelj
Date: 2004-11-16 02:00:37 +0100 (Tue, 16 Nov 2004)
New Revision: 52

Modified:
   framework/trunk/CHANGELOG
   framework/trunk/ircbp.py
Log:
NJ - 16/11/04 - Somehow an IF statement got replaced with &quot;hey&quot; so it wouldn't work :(
NJ - 16/11/04 - After advise all the tabs have being removed

Modified: framework/trunk/CHANGELOG
===================================================================
--- framework/trunk/CHANGELOG	2004-11-16 00:06:48 UTC (rev 51)
+++ framework/trunk/CHANGELOG	2004-11-16 01:00:37 UTC (rev 52)
@@ -60,3 +60,5 @@
 NJ - 15/11/04 - Worked out a config table system
 NJ - 15/11/04 - Implemented all the DB calls but have not yet got a NSPASSWD coloum in yet...
 NJ - 16/11/04 - Add mysql table create file...
+NJ - 16/11/04 - Somehow an IF statement got replaced with &quot;hey&quot; so it wouldn't work :(
+NJ - 16/11/04 - After advise all the tabs have being removed

Modified: framework/trunk/ircbp.py
===================================================================
--- framework/trunk/ircbp.py	2004-11-16 00:06:48 UTC (rev 51)
+++ framework/trunk/ircbp.py	2004-11-16 01:00:37 UTC (rev 52)
@@ -56,23 +56,23 @@
     x = 0
     print &quot;Starting the loop&quot;
     while (len(ircbpconfig.channels)-1 &gt;= x):
-	print &quot;The loop is going to join the channel in ircbpconfig.channels[&quot; + str(x) + &quot;] which is &quot; + ircbpconfig.channels[x]
-	irccommand(&quot;JOIN &quot; + ircbpconfig.channels[x])
-	x = x+1
+        print &quot;The loop is going to join the channel in ircbpconfig.channels[&quot; + str(x) + &quot;] which is &quot; + ircbpconfig.channels[x]
+        irccommand(&quot;JOIN &quot; + ircbpconfig.channels[x])
+        x = x+1
     print &quot;dojoins Complete!&quot;
 
 
 def sendnickserv():
     if ircbpconfig.NSPASSWORD != &quot;&quot;: 
-	irccommand(&quot;PRIVMSG NICKSERV :IDENTIFY &quot; + ircbpconfig.NSPASSWORD)
-	time.sleep(10)
+        irccommand(&quot;PRIVMSG NICKSERV :IDENTIFY &quot; + ircbpconfig.NSPASSWORD)
+        time.sleep(10)
 
 #send login data (customizable)
 def irclogin():
     #We need to see if we need to send a password, so here we go
     if ircbpconfig.SVRPASSWORD != &quot;&quot;:
-	#Pass Required so lets send it!
-	irccommand(&quot;PASS &quot; + ircbpconfig.SVRPASSWORD)
+        #Pass Required so lets send it!
+        irccommand(&quot;PASS &quot; + ircbpconfig.SVRPASSWORD)
 
     #IRC &quot;USER&quot; RFC says: &quot;USER Username Hostname Servername :Realname&quot;
     irccommand(&quot;USER %s %s %s :%s&quot; % (ircbpconfig.NICKNAME, ircbpconfig.NICKNAME, ircbpconfig.SERVER, ircbpconfig.REALNAME))
@@ -86,14 +86,14 @@
     x = 0
     print &quot;starting the loop&quot;
     while (len(ircbpconfig.privledged)-1 &gt;= x):
-	print &quot;The data we got is: &quot; + USERHOSTTBC
-	print &quot;The loop is checking ircbpconfig.privledged[&quot; + str(x) + &quot;] which is &quot; + ircbpconfig.privledged[x]
-	if fnmatch.fnmatch(USERHOSTTBC,ircbpconfig.privledged[x]):
-	    print &quot;OMG MATCH!&quot;
-	    return 1
-	else:
-	    x = x+1
-	    print &quot;NOT A MATCH!&quot;
+        print &quot;The data we got is: &quot; + USERHOSTTBC
+        print &quot;The loop is checking ircbpconfig.privledged[&quot; + str(x) + &quot;] which is &quot; + ircbpconfig.privledged[x]
+        if fnmatch.fnmatch(USERHOSTTBC,ircbpconfig.privledged[x]):
+            print &quot;OMG MATCH!&quot;
+            return 1
+        else:
+            x = x+1
+            print &quot;NOT A MATCH!&quot;
     return 0
     print &quot;No Matches&quot;
 
@@ -104,14 +104,14 @@
     x = 0
     print &quot;Starting the loop&quot;
     while (len(ircbpconfig.channels)-1 &gt;= x):
-	print &quot;The loop is checking if we are in ircbpconfig.channels[&quot; + str(x) + &quot;] which is &quot; + ircbpconfig.channels[x]
-	if string.upper(ircbpconfig.channels[x]) == string.upper(CHKCHANNEL):
-	    print &quot;We are in it!&quot;
-	    return 1
-	else:
-	    #Keep going!
-	    x = x+1
-	    print &quot;No match yet&quot;
+        print &quot;The loop is checking if we are in ircbpconfig.channels[&quot; + str(x) + &quot;] which is &quot; + ircbpconfig.channels[x]
+        if string.upper(ircbpconfig.channels[x]) == string.upper(CHKCHANNEL):
+            print &quot;We are in it!&quot;
+            return 1
+        else:
+            #Keep going!
+            x = x+1
+            print &quot;No match yet&quot;
     return 0
     print &quot;No matches&quot;
     
@@ -120,15 +120,15 @@
     x = 0
     print &quot;Starting the loop&quot;
     while (len(ircbpconfig.channels)-1 &gt;= x):
-    	print &quot;The loop is checking if the channel is a match @ ircbpconfig.channels[&quot; + str(x) + &quot;] which is &quot; + ircbpconfig.channels[x]
-hey
-	    print &quot;We are in it!&quot;
-	    del ircbpconfig.channels[x]
-	    return 1
-	else:
-	    #Keep going!
-	    x = x+1
-	    print &quot;No match yet&quot;
+        print &quot;The loop is checking if the channel is a match @ ircbpconfig.channels[&quot; + str(x) + &quot;] which is &quot; + ircbpconfig.channels[x]
+        if string.upper(ircbpconfig.channels[x]) == string.upper(CHANNEL):
+            print &quot;We are in it!&quot;
+            del ircbpconfig.channels[x]
+            return 1
+        else:
+            #Keep going!
+            x = x+1
+            print &quot;No match yet&quot;
     return 0
     print &quot;No matches&quot;
 
@@ -137,14 +137,14 @@
 #    x = 0
 #    print &quot;Starting the loop&quot;
 #    while (len(prefixes)-1 &gt;= x):
-#	print &quot;The loop is checking if the prefix in &quot; + INDATA + &quot; is using the prefix in prefixes[&quot; + str(x) + &quot;] which is &quot; + prefixes[x]
-#	if string.upper(prefixes[x] + COMMAND) == string.upper(INDATA):
-#	    print &quot;We are in it!&quot;
-#	    return 1
-#	else:
-#	    #Keep going!
-#	    x = x+1
-#	    print &quot;No match yet&quot;
+#        print &quot;The loop is checking if the prefix in &quot; + INDATA + &quot; is using the prefix in prefixes[&quot; + str(x) + &quot;] which is &quot; + prefixes[x]
+#        if string.upper(prefixes[x] + COMMAND) == string.upper(INDATA):
+#            print &quot;We are in it!&quot;
+#            return 1
+#        else:
+#            #Keep going!
+#            x = x+1
+#            print &quot;No match yet&quot;
 #    return 0
 #    print &quot;No matches&quot;
 
@@ -160,175 +160,175 @@
     print buffer,
 
     if msg[0] == &quot;PING&quot;: #check if server have sent ping command
-	irccommand(&quot;PONG %s&quot; % msg[1]) #answer with pong as per RFC 1459
+        irccommand(&quot;PONG %s&quot; % msg[1]) #answer with pong as per RFC 1459
     if msg[1] == 'PRIVMSG' and msg[2] == ircbpconfig.NICKNAME:
-	print &quot;We got a PM!!!&quot;
-	nick_name = msg[0][:string.find(msg[0],&quot;!&quot;)] #if a private message is sent to you catch it
-	print &quot;Sent by &quot; + nick_name
-	message = ' '.join(msg[3:])
-	print &quot;The message was: &quot; + message
+        print &quot;We got a PM!!!&quot;
+        nick_name = msg[0][:string.find(msg[0],&quot;!&quot;)] #if a private message is sent to you catch it
+        print &quot;Sent by &quot; + nick_name
+        message = ' '.join(msg[3:])
+        print &quot;The message was: &quot; + message
     #if msg[1] == 'PRIVMSG' and ischanmember(msg[2]):
     if msg[1] == 'PRIVMSG' and msg[2][0] == &quot;#&quot;:
-	# Doing this for HOSTMASK auth method which is now in use
-	HOSTMASK = string.lstrip(msg[0], ':')
-	# Some functions still need nick_name so lets keep it!
-	nick_name = string.lstrip(msg[0][:string.find(msg[0],&quot;!&quot;)], ':')
-	CHANNEL = msg[2]
-	if len(msg) &gt; 3:
-	    print &quot;We have a channel message! - W00T!!!&quot;
+        # Doing this for HOSTMASK auth method which is now in use
+        HOSTMASK = string.lstrip(msg[0], ':')
+        # Some functions still need nick_name so lets keep it!
+        nick_name = string.lstrip(msg[0][:string.find(msg[0],&quot;!&quot;)], ':')
+        CHANNEL = msg[2]
+        if len(msg) &gt; 3:
+            print &quot;We have a channel message! - W00T!!!&quot;
 
-	    # Say Command
+            # Say Command
 
-	    if string.upper(string.lstrip(msg[3], ':')) == string.upper('!say'):
-		print &quot;We need to say something :P&quot;
-		message = ' '.join(msg[4:])
-		irccommand(&quot;PRIVMSG &quot; + CHANNEL + &quot; :&quot; + message)
+            if string.upper(string.lstrip(msg[3], ':')) == string.upper('!say'):
+                print &quot;We need to say something :P&quot;
+                message = ' '.join(msg[4:])
+                irccommand(&quot;PRIVMSG &quot; + CHANNEL + &quot; :&quot; + message)
 
-	    # Topic Command
+            # Topic Command
 
-	    if string.upper(string.lstrip(msg[3], ':')) == string.upper('!topic'):
-		if privcheck(HOSTMASK):
-		    if len(msg) &gt; 4:
-			print &quot;Changing Topic&quot;
-			message = ' '.join(msg[4:])
-			print &quot;The new topic will be: &quot; + message
-			irccommand(&quot;TOPIC &quot; + CHANNEL + &quot; :&quot; + message)
-		    else:
-			print &quot;This is work in process&quot;
-		else:
-		    # They don't have privledges!
-		    irccommand(&quot;PRIVMSG &quot; + CHANNEL + &quot; :No privledges for this command!&quot;)
+            if string.upper(string.lstrip(msg[3], ':')) == string.upper('!topic'):
+                if privcheck(HOSTMASK):
+                    if len(msg) &gt; 4:
+                        print &quot;Changing Topic&quot;
+                        message = ' '.join(msg[4:])
+                        print &quot;The new topic will be: &quot; + message
+                        irccommand(&quot;TOPIC &quot; + CHANNEL + &quot; :&quot; + message)
+                    else:
+                        print &quot;This is work in process&quot;
+                else:
+                    # They don't have privledges!
+                    irccommand(&quot;PRIVMSG &quot; + CHANNEL + &quot; :No privledges for this command!&quot;)
 
-	    # Kick Command
+            # Kick Command
 
-	    if string.upper(string.lstrip(msg[3], ':')) == string.upper('!kick'):
-		if privcheck(HOSTMASK) == 1:
-		    print &quot;Someone's being bad, I need to kick!&quot;
-		    #if msg[4] != '':
-		    if len(msg) &gt; 4:
-			if ischanmember(string.upper(msg[4])):
-			    irccommand(&quot;PRIVMSG &quot; + CHANNEL + &quot; :Oh someones being bad! LETS KICK!&quot;)
-			    if len(msg) &gt; 5:
-				#if msg[5] != '':
-				if len(msg) &gt; 6:
-				    message = ' '.join(msg[6:])
-				    irccommand(&quot;KICK &quot; + msg[4] + &quot; &quot; + msg[5] + &quot; :&quot; + message)
-				else:
-				    irccommand(&quot;KICK &quot; + msg[4] + &quot; &quot; + msg[5] + &quot; :You've being a BAD boy!&quot;)
+            if string.upper(string.lstrip(msg[3], ':')) == string.upper('!kick'):
+                if privcheck(HOSTMASK) == 1:
+                    print &quot;Someone's being bad, I need to kick!&quot;
+                    #if msg[4] != '':
+                    if len(msg) &gt; 4:
+                        if ischanmember(string.upper(msg[4])):
+                            irccommand(&quot;PRIVMSG &quot; + CHANNEL + &quot; :Oh someones being bad! LETS KICK!&quot;)
+                            if len(msg) &gt; 5:
+                                #if msg[5] != '':
+                                if len(msg) &gt; 6:
+                                    message = ' '.join(msg[6:])
+                                    irccommand(&quot;KICK &quot; + msg[4] + &quot; &quot; + msg[5] + &quot; :&quot; + message)
+                                else:
+                                    irccommand(&quot;KICK &quot; + msg[4] + &quot; &quot; + msg[5] + &quot; :You've being a BAD boy!&quot;)
 
-			        irccommand(&quot;PRIVMSG &quot; + CHANNEL + &quot; :&quot; + nick_name + &quot;, your dirty work is done!&quot;)
-			    else:
-			        irccommand(&quot;PRIVMSG &quot; + CHANNEL + &quot; :SYNTAX IS: !kick \x02&lt;nick&gt;\x02 [Optional Message]&quot;)
-			else:
-			    irccommand(&quot;PRIVMSG &quot; + CHANNEL + &quot; :&quot; + nick_name + &quot;, I'm not in that channel!&quot;)
-		    else:
-			irccommand(&quot;PRIVMSG &quot; + CHANNEL + &quot; :SYNTAX IS: !kick \x02&lt;nick&gt;\x02 [Optional Message]&quot;)
-		else:
-		    # They don't have privledges!
-		    irccommand(&quot;PRIVMSG &quot; + CHANNEL + &quot; :No privledges for this command!&quot;)
+                                irccommand(&quot;PRIVMSG &quot; + CHANNEL + &quot; :&quot; + nick_name + &quot;, your dirty work is done!&quot;)
+                            else:
+                                irccommand(&quot;PRIVMSG &quot; + CHANNEL + &quot; :SYNTAX IS: !kick \x02&lt;nick&gt;\x02 [Optional Message]&quot;)
+                        else:
+                            irccommand(&quot;PRIVMSG &quot; + CHANNEL + &quot; :&quot; + nick_name + &quot;, I'm not in that channel!&quot;)
+                    else:
+                        irccommand(&quot;PRIVMSG &quot; + CHANNEL + &quot; :SYNTAX IS: !kick \x02&lt;nick&gt;\x02 [Optional Message]&quot;)
+                else:
+                    # They don't have privledges!
+                    irccommand(&quot;PRIVMSG &quot; + CHANNEL + &quot; :No privledges for this command!&quot;)
 
 	    if string.upper(string.lstrip(msg[3], ':')) == string.upper('!list'):
-		    x = 0
-		    print &quot;Starting the loop&quot;
-		    while (len(ircbpconfig.channels)-1 &gt;= x):
-			irccommand(&quot;PRIVMSG &quot; + CHANNEL + &quot; :I am in: &quot; + ircbpconfig.channels[x])
-			x = x+1
-		    
-	    # Join Command
+                    x = 0
+                    print &quot;Starting the loop&quot;
+                    while (len(ircbpconfig.channels)-1 &gt;= x):
+                        irccommand(&quot;PRIVMSG &quot; + CHANNEL + &quot; :I am in: &quot; + ircbpconfig.channels[x])
+                        x = x+1
+    
+            # Join Command
 
-	    if string.upper(string.lstrip(msg[3], ':')) == string.upper('!join'):
-		print &quot;Joining a channel!&quot;
-		# Need to make sure that nick_name has in our privledged array
-		if privcheck(HOSTMASK):
-		    # He/She is, making sure that they provided a channel - We will need a string check on this too.
-		    if len(msg) &gt; 4:
-			# Something has being provided, need to make sure it is a channel for now by only checking if it has # at the start
-			if msg[4][0] == &quot;#&quot;:
-			    # All ok, adding the channel to the array, JOIN sent normally because we have gone past the time of dojoin
-			    ircbpconfig.addchan(msg[4])
-			    irccommand(&quot;JOIN &quot; + msg[4])
-			else:
-			    # Not a channel, return error
-			    irccommand(&quot;PRIVMSG &quot; + CHANNEL + &quot; :&quot; + msg[4] + &quot; is not a channel&quot;)
-		    else:
-			# Nothing provided, syntax error!
-			irccommand(&quot;PRIVMSG &quot; + CHANNEL + &quot; :Syntax error, correct syntax is: !join \x02&lt;channel&gt;\x02&quot;)
-		else:
-		    irccommand(&quot;PRIVMSG &quot; + CHANNEL + &quot; :No privledges for this command!&quot;)
+            if string.upper(string.lstrip(msg[3], ':')) == string.upper('!join'):
+                print &quot;Joining a channel!&quot;
+                # Need to make sure that nick_name has in our privledged array
+                if privcheck(HOSTMASK):
+                    # He/She is, making sure that they provided a channel - We will need a string check on this too.
+                    if len(msg) &gt; 4:
+                        # Something has being provided, need to make sure it is a channel for now by only checking if it has # at the start
+                        if msg[4][0] == &quot;#&quot;:
+                            # All ok, adding the channel to the array, JOIN sent normally because we have gone past the time of dojoin
+                            ircbpconfig.addchan(msg[4])
+                            irccommand(&quot;JOIN &quot; + msg[4])
+                        else:
+                            # Not a channel, return error
+                            irccommand(&quot;PRIVMSG &quot; + CHANNEL + &quot; :&quot; + msg[4] + &quot; is not a channel&quot;)
+                    else:
+                        # Nothing provided, syntax error!
+                        irccommand(&quot;PRIVMSG &quot; + CHANNEL + &quot; :Syntax error, correct syntax is: !join \x02&lt;channel&gt;\x02&quot;)
+                else:
+                    irccommand(&quot;PRIVMSG &quot; + CHANNEL + &quot; :No privledges for this command!&quot;)
 
 	    # Cycle Command
 
 	    if string.upper(string.lstrip(msg[3], ':')) == string.upper('!cycle'):
-		if privcheck(HOSTMASK):
-		    print &quot;Cycling!&quot;
-		    irccommand(&quot;PRIVMSG &quot; + CHANNEL + &quot; :Okie Doke!&quot;)
-		    irccommand(&quot;PART &quot; + CHANNEL)
-		    irccommand(&quot;JOIN &quot; + CHANNEL)
-		    irccommand(&quot;PRIVMSG &quot; + CHANNEL + &quot; :Did you miss me?&quot;)
-		else:
-		    # Oh dear they cycle our bot!
-		    irccommand(&quot;PRIVMSG &quot; + CHANNEL + &quot; :No privledges for this command!&quot;)
+                if privcheck(HOSTMASK):
+                    print &quot;Cycling!&quot;
+                    irccommand(&quot;PRIVMSG &quot; + CHANNEL + &quot; :Okie Doke!&quot;)
+                    irccommand(&quot;PART &quot; + CHANNEL)
+                    irccommand(&quot;JOIN &quot; + CHANNEL)
+                    irccommand(&quot;PRIVMSG &quot; + CHANNEL + &quot; :Did you miss me?&quot;)
+                else:
+                    # Oh dear they cycle our bot!
+                    irccommand(&quot;PRIVMSG &quot; + CHANNEL + &quot; :No privledges for this command!&quot;)
 
             # Part Command
 
-	    if string.upper(string.lstrip(msg[3], ':')) == string.upper('!part'):
-		if privcheck(HOSTMASK):
-		    if len(msg) &gt; 4:
-			if msg[4][0] == &quot;#&quot;:
-			    print &quot;Parting!&quot;
-			    irccommand(&quot;PRIVMSG &quot; + msg[4] + &quot; :buh-bye now! =)&quot;)
-			    irccommand(&quot;PART &quot; + msg[4] + &quot; :Part from %s&quot; % nick_name)
-			    remchan(msg[4])
-			else:
-			    irccommand(&quot;PRIVMSG &quot; + CHANNEL + &quot; :&quot; + msg[4] + &quot; is not a channel&quot;)
-		    else:
-			irccommand(&quot;PRIVMSG &quot; + CHANNEL + &quot; :buh-bye now! =)&quot;)
-			irccommand(&quot;PART &quot; + CHANNEL + &quot; :Part from %s&quot; % nick_name)
-			remchan(CHANNEL)
-		else:
-		    # Oh dear they tried to part our bot!
-		    irccommand(&quot;PRIVMSG &quot; + CHANNEL + &quot; :No privledges for this command!&quot;)
+            if string.upper(string.lstrip(msg[3], ':')) == string.upper('!part'):
+                if privcheck(HOSTMASK):
+                    if len(msg) &gt; 4:
+                        if msg[4][0] == &quot;#&quot;:
+                            print &quot;Parting!&quot;
+                            irccommand(&quot;PRIVMSG &quot; + msg[4] + &quot; :buh-bye now! =)&quot;)
+                            irccommand(&quot;PART &quot; + msg[4] + &quot; :Part from %s&quot; % nick_name)
+                            remchan(msg[4])
+                        else:
+                            irccommand(&quot;PRIVMSG &quot; + CHANNEL + &quot; :&quot; + msg[4] + &quot; is not a channel&quot;)
+                    else:
+                        irccommand(&quot;PRIVMSG &quot; + CHANNEL + &quot; :buh-bye now! =)&quot;)
+                        irccommand(&quot;PART &quot; + CHANNEL + &quot; :Part from %s&quot; % nick_name)
+                        remchan(CHANNEL)
+                else:
+                    # Oh dear they tried to part our bot!
+                    irccommand(&quot;PRIVMSG &quot; + CHANNEL + &quot; :No privledges for this command!&quot;)
 
-	    # Quit Command
+            # Quit Command
 
-	    if string.upper(string.lstrip(msg[3], ':')) == string.upper('!quit'):
-		if privcheck(HOSTMASK):
-		    print &quot;It's a quit&quot;
-		    irccommand(&quot;QUIT :Quit from &quot; + nick_name)
-		    print &quot;Sent quit message, exiting&quot;
-		    sys.exit()
-		else:
-		    # Oh dear they quit our bot!
-		    irccommand(&quot;PRIVMSG &quot; + CHANNEL + &quot; :No privledges for this command!&quot;)
-	else:
-	    # Somethings wrong with the server but yeah, we can save running some code
-	    print &quot;This is work in process&quot;
+            if string.upper(string.lstrip(msg[3], ':')) == string.upper('!quit'):
+                if privcheck(HOSTMASK):
+                    print &quot;It's a quit&quot;
+                    irccommand(&quot;QUIT :Quit from &quot; + nick_name)
+                    print &quot;Sent quit message, exiting&quot;
+                    sys.exit()
+                else:
+                    # Oh dear they quit our bot!
+                    irccommand(&quot;PRIVMSG &quot; + CHANNEL + &quot; :No privledges for this command!&quot;)
+        else:
+            # Somethings wrong with the server but yeah, we can save running some code
+            print &quot;This is work in process&quot;
     if msg[1] == 'KICK':
-	irccommand(&quot;JOIN &quot; + msg[2])
+        irccommand(&quot;JOIN &quot; + msg[2])
     #Join Blocking Modes
     if msg[1] == '467' or msg[1] == '471' or msg[1] == '473' or msg[1] == '474' or msg[1] == '475':
-	#We can't join channels that are invite only
-	print &quot;The channel the bot just tried to join is invite only...&quot;
-	print &quot;Removing from list&quot;
-	remchan(msg[3])
-	if len(ircbpconfig.CHANNELS) == 0:
-	    print &quot;There has being an error join the IRC Channels that you have provided,  and we cannot proceed.&quot;
-	    print &quot;For your convinence the bot has being cleanly shutdown&quot;
-	    irccommand(&quot;QUIT :Bot Error&quot;)
-	    sys.exit()
+        #We can't join channels that are invite only
+        print &quot;The channel the bot just tried to join is invite only...&quot;
+        print &quot;Removing from list&quot;
+        remchan(msg[3])
+        if len(ircbpconfig.CHANNELS) == 0:
+            print &quot;There has being an error join the IRC Channels that you have provided,  and we cannot proceed.&quot;
+            print &quot;For your convinence the bot has being cleanly shutdown&quot;
+            irccommand(&quot;QUIT :Bot Error&quot;)
+            sys.exit()
     if ircbpconfig.DANCERMODE:
-	if msg[1] == '379':
-	    print &quot;We are being forwarded&quot;
-	    remchan(msg[3])
-	    ircbpconfig.addchan(msg[4])
-	#join blocking modes
-	if msg[1] == '437' or msg[1] == '480' or msg[1] == '515':
-	    #We can't join channels that are invite only
-	    print &quot;The channel the bot just tried to join is invite only...&quot;
-	    print &quot;Removing from list&quot;
-	    remchan(msg[3])
-	    if len(ircbpconfig.CHANNELS) == 0:
-		print &quot;There has being an error join the IRC Channels that you have provided,  and we cannot proceed.&quot;
-		print &quot;For your convinence the bot has being cleanly shutdown&quot;
-		irccommand(&quot;QUIT :Bot Error&quot;)
-		sys.exit()
+        if msg[1] == '379':
+            print &quot;We are being forwarded&quot;
+            remchan(msg[3])
+            ircbpconfig.addchan(msg[4])
+        #join blocking modes
+        if msg[1] == '437' or msg[1] == '480' or msg[1] == '515':
+            #We can't join channels that are invite only
+            print &quot;The channel the bot just tried to join is invite only...&quot;
+            print &quot;Removing from list&quot;
+            remchan(msg[3])
+            if len(ircbpconfig.CHANNELS) == 0:
+                print &quot;There has being an error join the IRC Channels that you have provided,  and we cannot proceed.&quot;
+                print &quot;For your convinence the bot has being cleanly shutdown&quot;
+                irccommand(&quot;QUIT :Bot Error&quot;)
+                sys.exit()


</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="000046.html">[ircbp-commits] IRCBP -  r51 - framework/trunk
</A></li>
	<LI>Next message: <A HREF="000048.html">[ircbp-commits] IRCBP -  r53 - in website/trunk: . _notes images/ic includes
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#47">[ date ]</a>
              <a href="thread.html#47">[ thread ]</a>
              <a href="subject.html#47">[ subject ]</a>
              <a href="author.html#47">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.berlios.de/mailman/listinfo/ircbp-commits">More information about the ircbp-commits
mailing list</a><br>
</body></html>
